## Машина состояний игры

### Перечень состояний
- Boot: загрузка конфигов, локалей, сейва, инициализация PRNG.
- MainMenu: стартовый экран, переход в таверну или настройки.
- Tavern: хаб перед делвом — выбор героя, просмотр инвентаря/сокровищ, старт ранa.
- RunInit: подготовка делва (seed PRNG, сброс прогресса делва, рука пуста).
- DealHand: генерация стартовой руки (7 карт приключенцев).
- EnemyBattle: бой с врагами уровня (генерация ряда L, розыгрыш карт, сундуки/зелья).
- DragonBattle: специальная сцена боя при ≥3 Драконах в ряду.
- ChooseContinue: выбор «идти дальше» или «выйти и зафиксировать очки».
- ExitRun: фиксация очков за достигнутый уровень, сохранение добычи (конец делва).
- Graveyard: экран поражения (гибель в бою с драконом/ошибка расчёта) с резюме ранa.
- GameSummary: итог по завершении всех запланированных делвов (например, 3), награды/мета.
- Pause: оверлей паузы/настроек с возвратом в предыдущее состояние.

### Базовые переходы
- Boot → MainMenu
- MainMenu → Tavern | Settings
- Tavern → RunInit → DealHand → EnemyBattle
- EnemyBattle → (DragonBattle при ≥3 Драконах) → (возврат в EnemyBattle после исхода)
- EnemyBattle → ChooseContinue
- ChooseContinue → EnemyBattle (уровень L+1) | ExitRun
- ExitRun → (если делвов осталось) Tavern | (иначе) GameSummary
- Любое боевое состояние (EnemyBattle/DragonBattle) при поражении → Graveyard → Tavern/MainMenu
- GameSummary → MainMenu
- Любое состояние → Pause → возврат

Примечания
- RNG‑спавн: рука создаётся в DealHand; ряд уровня создаётся в EnemyBattle при входе (L карт).
- UI/ссылки на сцене настраиваются вручную; менеджер состояний лишь оповещает подписчиков (виды/контроллеры).


